rename certuficates folder to certificates_backup in the path /mongo
create a new folder mkdir certificates and copy all the files from certificates_backup to certificates

step 1 
openssl pkcs12 -in /mongo/certificates/client.pem -inkey /mongo/certificates/client.key -export -out /mongo/certificates/client.pfx -passout pass:DB@password_rotation

Connect to the mongodb with old password ( myWizard@123)

DB Dump:-

mongodump --host edeyze.de.t-internal.com:27017 --ssl --sslCAFile /mongo/certificates/CA.crt --sslPEMKeyFile /mongo/certificates/server.pem -u admin -p myWizard@123 --authenticationDatabase admin --out /var/FULLDBBACKUP6.2_incremental 

connect to mongodb with old password

mongosh --host edeyze.de.t-internal.com:27017 --ssl --sslCAFile /mongo/certificates/CA.crt --sslPEMKeyFile /mongo/certificates/server.pem -u admin -p myWizard@123 --authenticationDatabase admin

change the password for admin user

db.changeUserPassword('admin','DB@password_rotation') # NEW PASSWORD = DB@password_rotation put here the new pw

connect to mongodb with new password

mongosh --host edeyze.de.t-internal.com:27017 --ssl --sslCAFile /mongo/certificates/CA.crt --sslPEMKeyFile /mongo/certificates/server.pem -u admin -p DB@password_rotation --authenticationDatabase admin


show dbs(shows all the db's installed)

db.getSiblingDB('mywizard-phoenix').changeUserPassword('mywizard-phoenixUser','DB@password_rotation')

db.getSiblingDB('AIOCRDB').changeUserPassword('AIOCRDBUser','myWizMulti_Demo@008')
db.getSiblingDB('AIMSPDB').changeUserPassword('AIMSPDBUser','DB@password_rotation')
db.getSiblingDB('AIOCRDB').changeUserPassword('AIOCRDBUser','myWizMulti_Demo@008')
db.getSiblingDB('AISimilarityAnalyticsDB').changeUserPassword('AISimilarityAnalyticsDBUser','DB@password_rotation')
db.getSiblingDB('AIViabilityPredictorDB').changeUserPassword('AIViabilityPredictorDBUser','DB@password_rotation')
db.getSiblingDB('AICoreSimilarityAnalyticsDB').changeUserPassword('AICoreSimilarityAnalyticsDBUser','myWizMulti_Demo@008')
db.getSiblingDB('AIEventHandlerDB').changeUserPassword('AIEventHandlerDBUser','DB@password_rotation')
db.getSiblingDB('CygnusDB').changeUserPassword('CygnusDBUser','myWizMulti_Demo@008')
db.getSiblingDB('DailyStandupAssistantDB').changeUserPassword('DailyStandupAssistantDBUser','myWizMulti_Demo@008')
db.getSiblingDB('AIViabilityPredictorDB').changeUserPassword('AIViabilityPredictorDBUser','myWizMulti_Demo@008')
db.getSiblingDB('AgileAIDB').changeUserPassword('AgileAIDBUser','DB@password_rotation')
db.getSiblingDB('BusinessPrioritizationDB').changeUserPassword('BusinessPrioritizationDBUser','DB@password_rotation')
db.getSiblingDB('BusinessProcessBuilderDB').changeUserPassword('BusinessProcessBuilderDBUser','DB@password_rotation')
db.getSiblingDB('BusinessProcessHierarchyDB').changeUserPassword('BusinessProcessHierarchyDBUser','myWizMulti_Demo@008')
db.getSiblingDB('ConversationPlannerDB').changeUserPassword('ConversationPlannerDBUser','myWizMulti_Demo@008')
db.getSiblingDB('DigitalDesignThinkingDB').changeUserPassword('DigitalDesignThinkingDBUser','myWizMulti_Demo@008')
db.getSiblingDB('IngrAInDB').changeUserPassword('IngrAInDBUser','DB@password_rotation')
db.getSiblingDB('IngrAInMonteCarloDB').changeUserPassword('IngrAInMonteCarloDBUser','DB@password_rotation')
db.getSiblingDB('IngrAInInferenceEngineDB').changeUserPassword('IngrAInInferenceEngineDBUser','DB@password_rotation')
db.getSiblingDB('InstantTestAutomationDB').changeUserPassword('InstantTestAutomationDBUser','myWizMulti_Demo@008')
db.getSiblingDB('InsightfulTestPatternMiningDB').changeUserPassword('InsightfulTestPatternMiningDBUser','myWizMulti_Demo@008')
db.getSiblingDB('IntelligentArtifactsDB').changeUserPassword('IntelligentArtifactsDBUser','myWizMulti_Demo@008')
db.getSiblingDB('IntelligentChangeManagerDB').changeUserPassword('IntelligentChangeManagerDBUser','myWizMulti_Demo@008')
db.getSiblingDB('IntelligentReleasePlannerDB').changeUserPassword('IntelligentReleasePlannerDBUser','myWizMulti_Demo@008')
db.getSiblingDB('MilestonesAndDeliverablesDB').changeUserPassword('MilestonesAndDeliverablesDBUser','DB@password_rotation')
db.getSiblingDB('MyWizardAgileDB').changeUserPassword('MyWizardAgileDBUser','DB@password_rotation')
db.getSiblingDB('MyWizardHomeDB').changeUserPassword('MyWizardHomeDBUser','DB@password_rotation')
db.getSiblingDB('PhoenixVDSDB').changeUserPassword('PhoenixVDSDBUser','myWizMulti_Demo@008')
db.getSiblingDB('QuasarDB').changeUserPassword('QuasarDBUser','myWizMulti_Demo@008')
db.getSiblingDB('ProjectInitiationAssistantDB').changeUserPassword('ProjectInitiationAssistantDBUser','DB@password_rotation')
db.getSiblingDB('ReleasePlannerAgileDB').changeUserPassword('ReleasePlannerAgileDBUser','DB@password_rotation')
db.getSiblingDB('RAIDlogDB').changeUserPassword('RAIDlogDBUser','myWizMulti_Demo@008')
db.getSiblingDB('RequirementsDependencyBuilderDB').changeUserPassword('RequirementsDependencyBuilderDBUser','DB@password_rotation')
db.getSiblingDB('RequirementsReadinessAnalyzerDB').changeUserPassword('RequirementsReadinessAnalyzerDBUser','DB@password_rotation')
db.getSiblingDB('RequirementsSimilarityAnalyticsDB').changeUserPassword('RequirementsSimilarityAnalyticsDBUser','DB@password_rotation')
db.getSiblingDB('RequirementsTraceabilityAssistantDB').changeUserPassword('RequirementsTraceabilityAssistantDBUser','myWizMulti_Demo@008')
db.getSiblingDB('RoadMapAssistantDB').changeUserPassword('RoadMapAssistantDBUser','DB@password_rotation')
db.getSiblingDB('SibeDB').changeUserPassword('SibeDBUser','DB@password_rotation')
db.getSiblingDB('StoryPointEstimatorDB').changeUserPassword('StoryPointEstimatorDBUser','myWizMulti_Demo@008')
db.getSiblingDB('StorySlicingDB').changeUserPassword('StorySlicingDBUser','DB@password_rotation')
db.getSiblingDB('TestOptimizerDB').changeUserPassword('TestOptimizerDBUser','DB@password_rotation')
db.getSiblingDB('myPMODB').changeUserPassword('myPMODBUser','myWizMulti_Demo@008')
db.getSiblingDB('12041_quasar').changeUserPassword('12041_quasarUser,'myWizMulti_Demo@008')

db.getSiblingDB('BusinessProcessBuilderDB').changeUserPassword('BusinessProcessBuilderDB','myWizMulti_Demo@008')
db.getSiblingDB('ReleasePlannerAgileDB').changeUserPassword('ReleasePlannerAgileDBUser','myWizMulti_Demo@008')
db.getSiblingDB('AILanguageSupportDB').changeUserPassword('AILanguageSupportDBUser,'myWizMulti_Demo@008')
db.getSiblingDB('CollaborationDB').changeUserPassword('CollaborationDBUser,'myWizMulti_Demo@008')

----------------------------------------------------------------------------------- DBSERVER END
WEB AND APPSERVER ONLY

step 2   password change for all servers  new password 

step3    web servers and app servers decrypt using decrypt script 

step4run password rotation script for web and app server 

  go to /var/www

for file in $(find /var/www/ -name 'appsettings.json')
  do
echo $file
   sed -i 's|User:myWizard%40123|User:DB%40password_rotation|g' $file
  done
  

-------
for file in $(find /var/www/ -name '*.ini')
  do
echo $file
   sed -i 's|User:myWizard%40123|User:MongoDB2024passMYWIZARD20240101|g' $file
  done
  
  -------
  start
  
for file in $(find /var/www/ -name 'AzureADAuthProviderConfiguration.xml')
  do
echo $file
   sed -i 's|User:myWizard%40123|User:MongoDB2024passMYWIZARD20240101|g' $file
  done



######################## 
for file in $(find /var/www/ -name '*.json')
  do
echo $file
   sed -i 's|myWizard@123|MongoDB2024passMYWIZARD20240101|g' $file
  done

 

for file in $(find /var/www/ -name '*.ini')
  do
echo $file
   sed -i 's|myWizard@123|MongoDB2024passMYWIZARD20240101|g' $file
  done
  
for file in $(find /var/www/ -name '*.xml')
  do
echo $file
   sed -i 's|myWizard@123|MongoDB2024passMYWIZARD20240101|g' $file
  done

 end done

#go to the webserver and appserver

go to /var/www/appconfigfiles

rename certificates folder to certificates_backup

copy the new certificates folder from /mongo/ in DBServer 
copy certificates folder  to /var/www/appconfigfiles in app and web server

execute this cmd
- cp /var/www/appConfigFiles/certificates/CA.crt /etc/pki/ca-trust/source/anchors/
- cp /mongo/certificates/CA.crt /etc/pki/ca-trust/source/anchors/


- update-ca-trust extract
-------------------------------------------------------------------------


